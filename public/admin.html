<!doctype html>
<html><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
<title>Admin</title><link rel="stylesheet" href="/style.css"></head>
<body>
<h2>Admin</h2>
<button id="refresh">Aggiorna</button>
<pre id="list"></pre>
<audio id="sound" src="https://actions.google.com/sounds/v1/alarms/beep_short.ogg"></audio>
<script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
<script>
const socket = io();
socket.on("new_booking", b=>{
 document.getElementById("sound").play();
 alert("Nuova prenotazione: "+b.name);
 load();
});
async function load(){
 const r=await fetch("/api/requests");
 document.getElementById("list").innerText=JSON.stringify(await r.json(), null, 2);
}
refresh.onclick=load;
</script>
</body></html>
